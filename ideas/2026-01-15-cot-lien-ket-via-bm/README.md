# Cá»™t LiÃªn káº¿t Via-BM trong Báº£ng Ads

**Tráº¡ng thÃ¡i:** approved
**NgÃ y táº¡o:** 2026-01-15
**LiÃªn quan:** [Issue: Hiá»ƒn thá»‹ tÃ i nguyÃªn khÃ³ náº¯m báº¯t](../../issues/2026-01-15-hien-thi-tai-nguyen-kho-nam-bat.md)

---

## Váº¥n Ä‘á»

Báº£ng Ads hiá»‡n táº¡i thiáº¿u thÃ´ng tin vá» quan há»‡ vá»›i Via vÃ  BM:
- KhÃ´ng biáº¿t Ads nÃ y cÃ³ bao nhiÃªu Via cÃ³ thá»ƒ check
- KhÃ´ng biáº¿t Ä‘ang cÃ³ bao nhiÃªu BM trung gian vs BM gá»‘c
- KhÃ´ng tháº¥y Ä‘Æ°á»£c rá»§i ro (Via die háº¿t? BM gá»‘c die?)

---

## Giáº£i phÃ¡p

ThÃªm **1 cá»™t "LiÃªn káº¿t"** gá»™p thÃ´ng tin Via + BM dÆ°á»›i dáº¡ng badge mÃ u.

---

## Thiáº¿t káº¿

### 1. Cá»™t trong báº£ng

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ads ID â”‚ Status â”‚ Spend â”‚ ğŸ”— LiÃªn káº¿t                     â”‚ Actions â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 001    â”‚ Active â”‚ $500  â”‚ [ğŸ‘¤3/5ğŸŸ¢] [BM 2/3+1GğŸŸ¢]        â”‚   ...   â”‚
â”‚ 002    â”‚ Paused â”‚ $0    â”‚ [ğŸ‘¤1/3ğŸŸ¡] [BM 1/2+1GğŸŸ¡]        â”‚   ...   â”‚
â”‚ 003    â”‚ Active â”‚ $200  â”‚ [ğŸ‘¤0/2ğŸ”´] [BM 0/1+1GğŸ”´]        â”‚   ...   â”‚
â”‚ 004    â”‚ Active â”‚ $100  â”‚ [ğŸ‘¤2/2ğŸŸ¢] [BM ğŸ’€Gá»C DIE]       â”‚   ...   â”‚
â”‚ 005    â”‚ Active â”‚ $50   â”‚ [ğŸ‘¤1/1ğŸŸ¡] [BM 1/1+âš ï¸0G]        â”‚   ...   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. Format badge

**Via badge:** `[ğŸ‘¤ live/total mÃ u]`
- `3/5` = 3 Via live / 5 tá»•ng
- Icon: ğŸ‘¤ (ngÆ°á»i)

**BM badge:** `[BM trung_gian/total + gá»‘c mÃ u]`
- `2/3+1G` = 2 trung gian live / 3 tá»•ng + 1 Gá»‘c
- Icon: BM (text)

### 3. Quy táº¯c mÃ u

**Via:**
| Live count | MÃ u | Ã nghÄ©a |
|------------|-----|---------|
| 0 | ğŸ”´ Äá» | KhÃ´ng Via nÃ o check Ä‘Æ°á»£c |
| 1 | ğŸŸ¡ VÃ ng | Chá»‰ 1 Via, rá»§i ro |
| 2+ | ğŸŸ¢ Xanh | CÃ³ backup |

**BM Trung gian:**
| Live count | MÃ u | Ã nghÄ©a |
|------------|-----|---------|
| 0 | ğŸ”´ Äá» | KhÃ´ng Ä‘Æ°á»ng check an toÃ n |
| 1 | ğŸŸ¡ VÃ ng | Ãt dá»± phÃ²ng |
| 2+ | ğŸŸ¢ Xanh | Äá»§ dá»± phÃ²ng |

**BM Gá»‘c (Ä‘áº·c biá»‡t):**
| Tráº¡ng thÃ¡i | Hiá»ƒn thá»‹ | MÃ u |
|------------|----------|-----|
| 1 Gá»‘c live | `+1G` | BÃ¬nh thÆ°á»ng |
| 0 Gá»‘c (chÆ°a sync) | `+âš ï¸0G` | ğŸŸ¡ Warning |
| Gá»‘c die | `ğŸ’€Gá»C DIE` | ğŸ”´ğŸ”´ Critical |

---

### 4. Modal chi tiáº¿t (click vÃ o badge)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”— Chi tiáº¿t LiÃªn káº¿t - Ads 001                        [X]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸ“ BM Gá»C                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ âœ… BM Root ABC (ID: 123456789)                      â”‚   â”‚
â”‚  â”‚    Status: Live | Ads trong BM: 50                  â”‚   â”‚
â”‚  â”‚    Táº¡o bá»Ÿi: Via X | NgÃ y táº¡o: 2024-01-15           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  ğŸ“ BM TRUNG GIAN (2 live / 3 total)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ âœ… BM Trung gian Alpha - Live - Via: A, B   CÃ³ Token             â”‚   â”‚
â”‚  â”‚ âœ… BM Proxy Beta  - Live - Via: C                  â”‚   â”‚
â”‚  â”‚ âŒ BM Proxy Gamma - DIE  - Died: 2025-12-20        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  ğŸ‘¤ VIA (3 live / 5 total)                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ âœ… Via A | Live | Worker âœ… | Tasks: 150           â”‚   â”‚
â”‚  â”‚    â””â”€ qua: [BM Proxy Alpha] [BM Proxy Beta]        â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚ âœ… Via B | Live | Backup                           â”‚   â”‚
â”‚  â”‚    â””â”€ qua: [BM Root ABC âš ï¸Gá»C]                     â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚ âœ… Via C | Live | Worker âœ… | Tasks: 89            â”‚   â”‚
â”‚  â”‚    â””â”€ qua: [BM Proxy Alpha]                        â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚ âŒ Via D | Die                                      â”‚   â”‚
â”‚  â”‚    â””â”€ qua: [BM Proxy Gamma âŒDIE]                  â”‚   â”‚
â”‚  â”‚                                                     â”‚   â”‚
â”‚  â”‚ âŒ Via E | Die                                      â”‚   â”‚
â”‚  â”‚    â””â”€ qua: [BM Root ABC âš ï¸Gá»C]                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â”‚  ğŸ“Š TÃ³m táº¯t rá»§i ro:                                        â”‚
â”‚  â€¢ BM Gá»‘c: âœ… An toÃ n                                      â”‚
â”‚  â€¢ BM Trung gian: âœ… 2 live (Ä‘á»§ dá»± phÃ²ng)                  â”‚
â”‚  â€¢ Via Worker: âœ… 2 worker active                          â”‚
â”‚  â€¢ âš ï¸ Via B, Via E cáº§m BM Gá»‘c trá»±c tiáº¿p                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5. Case Ä‘áº·c biá»‡t

**BM Gá»‘c chÆ°a sync (0G):**
```
â”‚  ğŸ“ BM Gá»C                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ âš ï¸ CHÆ¯A XÃC Äá»ŠNH                                    â”‚   â”‚
â”‚  â”‚    Ads chÆ°a Ä‘Æ°á»£c Ä‘á»“ng bá»™ Ä‘á»§ Ä‘á»ƒ xÃ¡c Ä‘á»‹nh BM gá»‘c     â”‚   â”‚
â”‚  â”‚    â†’ Cáº§n sync Via liÃªn quan Ä‘á»ƒ láº¥y thÃ´ng tin       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
```

**BM Gá»‘c DIE:**
```
â”‚  ğŸ“ BM Gá»C                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ ğŸ’€ BM Root ABC - DIE                                â”‚   â”‚
â”‚  â”‚    âš ï¸ GAME OVER - Ads nÃ y khÃ´ng thá»ƒ sá»­ dá»¥ng        â”‚   â”‚
â”‚  â”‚    Died at: 2025-12-25                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
```

---

## Ghi chÃº ká»¹ thuáº­t

### Data cáº§n cÃ³
- Via: id, name, status (live/die), is_worker, task_count
- Via-BM mapping: via_id, bm_id
- BM: id, name, type (root/proxy), status (live/die)
- BM-Ads mapping: bm_id, ads_id, is_owner (gá»‘c hay share)

### API cáº§n thiáº¿t
```
GET /api/ads/{id}/relationships
Response:
{
  "ads_id": "001",
  "root_bm": { "id": "...", "name": "...", "status": "live" },
  "proxy_bms": [
    { "id": "...", "name": "...", "status": "live", "vias": [...] }
  ],
  "vias": [
    { "id": "...", "name": "...", "status": "live", "is_worker": true, "via_bms": [...] }
  ],
  "summary": {
    "via_live": 3, "via_total": 5,
    "bm_proxy_live": 2, "bm_proxy_total": 3,
    "root_bm_status": "live"
  }
}
```

---

## Demo

ğŸ“ **[demo/modal-lien-ket.html](demo/modal-lien-ket.html)**

Demo bao gá»“m:
- Báº£ng Ads vá»›i cá»™t LiÃªn káº¿t (badge Via + BM)
- Modal chi tiáº¿t khi click vÃ o badge
- 5 case demo: Normal, Warning, Critical, BM Gá»‘c Die, ChÆ°a Sync
- Tailwind CSS via CDN
- Dá»¯ liá»‡u giáº£ (mock data)

**CÃ¡ch cháº¡y:** Má»Ÿ file HTML trá»±c tiáº¿p trong browser

---

## Lá»‹ch sá»­

| NgÃ y | Thay Ä‘á»•i |
|------|----------|
| 2026-01-15 | Khá»Ÿi táº¡o idea |
| 2026-01-15 | ThÃªm thiáº¿t káº¿ Via hiá»ƒn thá»‹ BM liÃªn káº¿t |
| 2026-01-16 | ThÃªm demo HTML vá»›i Tailwind CSS |
